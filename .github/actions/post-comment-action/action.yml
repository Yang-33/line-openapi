name: 'Post and Manage PR Comment'
description: 'Posts a comment to PR and deletes previous ones for the same job'
inputs:
  language:
    description: 'The language of the SDK'
    required: true
  github-token:
    description: 'The GitHub token'
    required: true

outputs: {}
runs:
  using: 'composite'
  steps:
    - name: Install dependencies
      run: npm ci
      shell: bash
      working-directory: ./.github/actions/post-comment-action

    - name: Post PR comment
      run: .github/actions/post-comment-action/main.js
      shell: bash
      working-directory: ${{ github.workspace }}
      env:
        NODE_PATH: ${{ github.workspace }}/.github/actions/post-comment-action/node_modules
        GITHUB_TOKEN: ${{ inputs.github-token }}
